{"version":3,"file":"signal.test.js","names":["createEffect","testButterflyProps","reactive","signal","signalify","memo","describe","_initProto","_init_colors","_init_extra_colors","_init_colors2","_init_extra_colors2","_init_wingSize","_init_extra_wingSize","_initProto2","_init_colors3","_init_extra_colors3","_init_finalize","_init_extra_finalize","_init_colors4","_init_extra_colors4","_init_wingSize2","_init_extra_wingSize2","_init_finalize2","_init_extra_finalize2","_init_colors5","_init_extra_colors5","_init_wingSize3","_init_extra_wingSize3","_init_colors6","_get_colors","_set_colors","_init_extra_colors6","_initProto3","_call_colors","_call_colors2","_initProto4","_initProto5","Butterfly","_applyDecs","e","colors","wingSize","s","it","b","Butterfly2","constructor","Butterfly3","o","finalize","v","_","Butterfly4","A","Butterfly5","Butterfly6","#colors","getColors","setColors","testPrivate","Butterfly7","_colors","Base","Butterfly8","count","expect","toBe","ensure","_init_colors7","_init_extra_colors7","Mid","b0","testProp","Object","getOwnPropertyDescriptor","get","call","SubButterfly","args","m","value","SubSubButterfly","b2","k","startVal","newVal","_initProto6","_init_colors8","_init_extra_colors8","Insect","double","arg","_init_do","_init_extra_do","Doer","do","doer","newFunc","_Foo2","_initClass","_init_amount","_init_extra_amount","_initClass2","_init_double","_init_extra_double","_Foo","Foo","c","amount","_Bar","Bar","noLoop","not","toThrow","_init_amount2","_init_extra_amount2","_initProto7","_initProto8","_init_venomous","_init_extra_venomous","_init_legs","_init_extra_legs","venomous","legs","eyes","n","antennas","i","testNoDuplicateSignal","prop"],"sources":["../../src/decorators/signal.test.ts"],"sourcesContent":["import {createEffect} from 'solid-js'\nimport {testButterflyProps} from '../index.test.js'\nimport {reactive} from './reactive.js'\nimport {signal} from './signal.js'\nimport {signalify} from '../signals/signalify.js'\nimport {memo} from './memo.js'\n\ndescribe('classy-solid', () => {\n\tdescribe('@reactive, @signal', () => {\n\t\tclass Butterfly {\n\t\t\t@signal colors = 3\n\n\t\t\t#wingSize = 2\n\n\t\t\t@signal get wingSize() {\n\t\t\t\treturn this.#wingSize\n\t\t\t}\n\t\t\t@signal set wingSize(s: number) {\n\t\t\t\tthis.#wingSize = s\n\t\t\t}\n\t\t}\n\n\t\tit('makes class fields reactive, using class and field/getter/setter decorators', () => {\n\t\t\tconst b = new Butterfly()\n\n\t\t\ttestButterflyProps(b)\n\t\t})\n\n\t\tclass Butterfly2 {\n\t\t\t@signal colors = 3\n\t\t\t@signal wingSize = 2\n\t\t}\n\n\t\tit('makes class fields reactive, using field decorators without class decorator', () => {\n\t\t\tconst b = new Butterfly2()\n\n\t\t\ttestButterflyProps(b)\n\t\t})\n\n\t\tclass Butterfly3 {\n\t\t\t@signal colors = 3\n\n\t\t\t#wingSize = 2\n\n\t\t\t@signal get wingSize() {\n\t\t\t\treturn this.#wingSize\n\t\t\t}\n\t\t\t@signal set wingSize(s: number) {\n\t\t\t\tthis.#wingSize = s\n\t\t\t}\n\n\t\t\t// @ts-ignore\n\t\t\t@signal #finalize\n\t\t}\n\n\t\tit('makes class fields reactive, using field/getter/setter decorators without class decorator', () => {\n\t\t\tconst b = new Butterfly3()\n\n\t\t\ttestButterflyProps(b)\n\t\t})\n\n\t\tclass Butterfly4 {\n\t\t\t@signal colors = 3\n\t\t\t@signal accessor wingSize = 2\n\t\t\t// @ts-ignore\n\t\t\t@signal #finalize\n\t\t}\n\n\t\tit('makes class fields reactive, using field/accessor decorators without class decorator', () => {\n\t\t\tconst b = new Butterfly4()\n\n\t\t\ttestButterflyProps(b)\n\t\t})\n\n\t\tclass Butterfly5 {\n\t\t\t@signal colors = 3\n\t\t\t@signal accessor wingSize = 2\n\t\t}\n\n\t\tit('makes class fields reactive, using field/accessor decorators with class decorator', () => {\n\t\t\tconst b = new Butterfly5()\n\n\t\t\ttestButterflyProps(b)\n\t\t})\n\n\t\tclass Butterfly6 {\n\t\t\t@signal accessor #colors = 3\n\n\t\t\tgetColors() {\n\t\t\t\treturn this.#colors\n\t\t\t}\n\t\t\tsetColors(v: number) {\n\t\t\t\treturn (this.#colors = v)\n\t\t\t}\n\t\t}\n\n\t\tit('makes private class auto accessor reactive', () => {\n\t\t\tconst b = new Butterfly6()\n\t\t\ttestPrivate(b)\n\t\t})\n\n\t\tclass Butterfly7 {\n\t\t\t#_colors = 3\n\n\t\t\t@signal get #colors() {\n\t\t\t\treturn this.#_colors\n\t\t\t}\n\t\t\t@signal set #colors(v: number) {\n\t\t\t\tthis.#_colors = v\n\t\t\t}\n\n\t\t\tgetColors() {\n\t\t\t\treturn this.#colors\n\t\t\t}\n\t\t\tsetColors(v: number) {\n\t\t\t\treturn (this.#colors = v)\n\t\t\t}\n\t\t}\n\n\t\tit('makes private class getter/setter accessors reactive', () => {\n\t\t\tconst b = new Butterfly7()\n\t\t\ttestPrivate(b)\n\t\t})\n\n\t\tclass Base {\n\t\t\t#colors = 3\n\n\t\t\t@signal get colors() {\n\t\t\t\treturn this.#colors\n\t\t\t}\n\t\t\t@signal set colors(v: number) {\n\t\t\t\tthis.#colors = v\n\t\t\t}\n\t\t}\n\n\t\tclass Butterfly8 extends Base {\n\t\t\t#colors = 3\n\n\t\t\t@signal override get colors() {\n\t\t\t\treturn this.#colors\n\t\t\t}\n\t\t\t@signal override set colors(v: number) {\n\t\t\t\tthis.#colors = v\n\t\t\t}\n\n\t\t\tgetColors() {\n\t\t\t\treturn this.colors\n\t\t\t}\n\t\t\tsetColors(v: number) {\n\t\t\t\treturn (this.colors = v)\n\t\t\t}\n\t\t}\n\n\t\tit('makes overridden class getter/setter accessors reactive', () => {\n\t\t\tconst b = new Butterfly8()\n\t\t\ttestPrivate(b)\n\t\t})\n\n\t\tfunction testPrivate(b: Pick<Butterfly6, 'getColors' | 'setColors'>) {\n\t\t\tlet count = 0\n\n\t\t\tcreateEffect(() => {\n\t\t\t\tb.getColors()\n\t\t\t\tcount++\n\t\t\t})\n\n\t\t\texpect(b.getColors()).toBe(3)\n\t\t\texpect(count).toBe(1)\n\n\t\t\tb.setColors(5)\n\t\t\texpect(b.getColors()).toBe(5)\n\t\t\texpect(count).toBe(2)\n\t\t}\n\n\t\tconst ensure = it\n\n\t\tensure('overridden fields work as expected', async () => {\n\t\t\tclass Mid extends Butterfly {\n\t\t\t\toverride colors = 0\n\t\t\t}\n\n\t\t\t// ensure subclass did not interfere with functionality of base class\n\t\t\tconst b0 = new Butterfly()\n\t\t\ttestProp(b0, 'colors', 3, 4, true)\n\t\t\texpect(Object.getOwnPropertyDescriptor(b0, 'colors')?.get?.call(b0) === 4).toBe(true) // accessor descriptor\n\n\t\t\tclass SubButterfly extends Mid {\n\t\t\t\t@signal override colors = 123\n\t\t\t}\n\n\t\t\t// ensure subclass did not interfere with functionality of base class\n\t\t\tconst m = new Mid()\n\t\t\ttestProp(m, 'colors', 0, 1, false)\n\t\t\texpect(Object.getOwnPropertyDescriptor(m, 'colors')?.value === 1).toBe(true) // value descriptor\n\n\t\t\tclass SubSubButterfly extends SubButterfly {\n\t\t\t\toverride colors = 456\n\t\t\t}\n\n\t\t\tconst b = new SubButterfly()\n\t\t\ttestButterflyProps(b, 123)\n\n\t\t\tconst b2 = new SubSubButterfly()\n\n\t\t\ttestProp(b2, 'colors', 456, 654, false)\n\t\t})\n\n\t\tfunction testProp<T extends object>(o: T, k: keyof T, startVal: any, newVal: any, reactive = true) {\n\t\t\tlet count = 0\n\n\t\t\tcreateEffect(() => {\n\t\t\t\to[k]\n\t\t\t\tcount++\n\t\t\t})\n\n\t\t\texpect(o[k]).toBe(startVal)\n\t\t\texpect(count).toBe(1)\n\n\t\t\to[k] = newVal // should not be a signal, should not trigger\n\n\t\t\texpect(o[k]).toBe(newVal)\n\t\t\texpect(count).toBe(reactive ? 2 : 1)\n\t\t}\n\n\t\tit('does not prevent superclass constructor from receiving subclass constructor args', () => {\n\t\t\tclass Insect {\n\t\t\t\tconstructor(public double: number) {}\n\t\t\t}\n\n\t\t\tclass Butterfly extends Insect {\n\t\t\t\t@signal colors = 3\n\n\t\t\t\t#wingSize = 2\n\n\t\t\t\t@signal get wingSize() {\n\t\t\t\t\treturn this.#wingSize\n\t\t\t\t}\n\t\t\t\t@signal set wingSize(s: number) {\n\t\t\t\t\tthis.#wingSize = s\n\t\t\t\t}\n\n\t\t\t\tconstructor(arg: number) {\n\t\t\t\t\tsuper(arg * 2)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst b = new Butterfly(4)\n\n\t\t\texpect(b.double).toBe(8)\n\t\t\ttestButterflyProps(b)\n\t\t})\n\n\t\tit('works with function values', () => {\n\t\t\t// This test ensures that functions are handled propertly, because\n\t\t\t// if passed without being wrapped to a signal setter it will be\n\t\t\t// called immediately with the previous value and be expected to\n\t\t\t// return a new value, instead of being set as the actual new value.\n\n\t\t\tclass Doer {\n\t\t\t\t@signal do: (() => unknown) | null = null\n\t\t\t}\n\n\t\t\tconst doer = new Doer()\n\n\t\t\texpect(doer.do).toBe(null)\n\n\t\t\tconst newFunc = () => 123\n\t\t\tdoer.do = newFunc\n\n\t\t\texpect(doer.do).toBe(newFunc)\n\t\t\texpect(doer.do()).toBe(123)\n\t\t})\n\n\t\tdescribe('Reactivity Tracking in Constructors', () => {\n\t\t\tit('automatically does not track reactivity in constructors when using @reactive', () => {\n\t\t\t\t@reactive\n\t\t\t\tclass Foo {\n\t\t\t\t\t@signal amount = 3\n\t\t\t\t}\n\n\t\t\t\t@reactive\n\t\t\t\tclass Bar extends Foo {\n\t\t\t\t\t@signal double = 0\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper()\n\t\t\t\t\t\tthis.double = this.amount * 2 // this read of .amount should not be tracked\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet b: Bar\n\t\t\t\tlet count = 0\n\n\t\t\t\tfunction noLoop() {\n\t\t\t\t\tcreateEffect(() => {\n\t\t\t\t\t\tb = new Bar() // this should not track\n\t\t\t\t\t\tcount++\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\texpect(noLoop).not.toThrow()\n\t\t\t\texpect(count).toBe(1)\n\n\t\t\t\tconst b2 = b!\n\n\t\t\t\tb!.amount = 4 // hence this should not trigger\n\n\t\t\t\t// If the effect ran only once initially, not when setting b.colors,\n\t\t\t\t// then both variables should reference the same instance\n\t\t\t\texpect(count).toBe(1)\n\t\t\t\texpect(b!).toBe(b2)\n\t\t\t})\n\n\t\t\tit('automatically does not track reactivity in constructors when using @memo', () => {\n\t\t\t\tclass Foo {\n\t\t\t\t\t@signal amount = 3\n\t\t\t\t}\n\n\t\t\t\tclass Bar extends Foo {\n\t\t\t\t\t@memo get double() {\n\t\t\t\t\t\treturn this.amount * 2\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet b: Bar\n\t\t\t\tlet count = 0\n\n\t\t\t\tfunction noLoop() {\n\t\t\t\t\tcreateEffect(() => {\n\t\t\t\t\t\tb = new Bar() // this should not track\n\t\t\t\t\t\tcount++\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\texpect(noLoop).not.toThrow()\n\t\t\t\texpect(count).toBe(1)\n\n\t\t\t\tconst b2 = b!\n\n\t\t\t\tb!.amount = 4 // hence this should not trigger\n\n\t\t\t\t// If the effect ran only once initially, not when setting b.colors,\n\t\t\t\t// then both variables should reference the same instance\n\t\t\t\texpect(count).toBe(1)\n\t\t\t\texpect(b!).toBe(b2)\n\t\t\t})\n\t\t})\n\n\t\tit('prevents duplicate signals for any property', () => {\n\t\t\tclass Insect {\n\t\t\t\t@signal venomous = 0\n\n\t\t\t\t@signal accessor legs = 6\n\n\t\t\t\t#eyes = 10\n\t\t\t\t@signal get eyes() {\n\t\t\t\t\treturn this.#eyes\n\t\t\t\t}\n\t\t\t\t@signal set eyes(n) {\n\t\t\t\t\tthis.#eyes = n\n\t\t\t\t}\n\n\t\t\t\tantennas = 0\n\n\t\t\t\tconstructor() {\n\t\t\t\t\t// This should not add any extra signals for properties that\n\t\t\t\t\t// are already signalified by the @signal decorator\n\t\t\t\t\tsignalify(this, 'venomous', 'legs', 'eyes', 'antennas')\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst i = new Insect()\n\n\t\t\ttestNoDuplicateSignal(i, 'venomous')\n\t\t\ttestNoDuplicateSignal(i, 'legs')\n\t\t\ttestNoDuplicateSignal(i, 'eyes')\n\t\t\ttestNoDuplicateSignal(i, 'antennas')\n\n\t\t\tfunction testNoDuplicateSignal(o: Insect, prop: keyof Insect) {\n\t\t\t\tlet count = 0\n\t\t\t\tcreateEffect(() => {\n\t\t\t\t\tcount++\n\t\t\t\t\to[prop]\n\t\t\t\t})\n\t\t\t\texpect(count).toBe(1)\n\t\t\t\to[prop]++\n\t\t\t\texpect(count).toBe(2) // it would be 3 if there were an extra signal\n\t\t\t}\n\t\t})\n\t})\n})\n"],"mappings":"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","ignoreList":[]}