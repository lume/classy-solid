{"version":3,"file":"types.js","names":[],"sources":["../../src/decorators/types.ts"],"sourcesContent":["import type {Constructor} from 'lowclass/dist/Constructor.js'\nimport type {SignalFunction} from '../signals/createSignalFunction.js'\nimport type {Signal} from 'solid-js'\n\nexport type AnyObject = Record<PropertyKey, unknown>\n\nexport type DecoratedValue = Constructor | Function | ClassAccessorDecoratorTarget<object, unknown> | undefined\n\nexport type PropKey = string | symbol\n\nexport type SupportedKind = 'field' | 'getter' | 'setter'\n\n// If we add options for `@signal` later (f.e. `@signal({equals: false})`),\n// those options can go in here too.\nexport interface PropSpec {\n\tinitialValue: unknown\n\tkind: SupportedKind\n}\n\nexport type MemberType =\n\t| 'signal-field'\n\t| 'memo-auto-accessor'\n\t| 'memo-accessor'\n\t| 'memo-method'\n\t| 'effect-auto-accessor'\n\t| 'effect-method'\n\nexport type MetadataMembers = Array<MemberStat>\n\nexport type MemberStat = {\n\ttype: MemberType\n\tname: PropKey\n\tapplied: WeakMap<object, boolean>\n\tfinalize?(this: AnyObject): void\n\t/**\n\t *\n\t */\n\tvalue?: unknown\n\tcontext: ClassMemberDecoratorContext\n\t/**\n\t * For signal fields, indicates whether an existing signal descriptor should\n\t * be restored instead of initializing a new one. This is used to support\n\t * overridden initial values in subclasses, while keeping base class effects\n\t * and memos working.\n\t */\n\treuseExistingSignal?: boolean\n\t/**\n\t * For signal fields, a subclass override's initial value to set into an\n\t * existing signal from a base class.\n\t */\n\tnewInitialValue?: unknown\n\t/** For signal fields, the existing signal descriptor to restore in a subclass override. */\n\texistingSignalDescriptor?: PropertyDescriptor\n}\n\nexport type ClassySolidMetadata = {\n\t__proto__: ClassySolidMetadata\n\tclassySolid_members?: MetadataMembers\n\tclassySolid_getterSetterSignals?: Record<PropKey, WeakMap<object, SignalFunction<unknown>> | undefined>\n\tclassySolid_getterSetterPairCounts?: {[key: PropKey]: 0 | 1 | 2}\n\tclassySolid_getterSetterMemos?: Record<PropKey, WeakMap<object, Signal<any>> | undefined>\n}\n"],"mappings":"","ignoreList":[]}