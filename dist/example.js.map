{"version":3,"file":"example.js","names":["signal","effect","memo","stopEffects","component","startEffects","render","html","onCleanup","Counter","_call_logCount","_init_count","_init_extra_count","_initProto","_applyDecs","console","log","count","_","logCount","e","constructor","increment","Example","_call_sum","_call_logSum","_init_num","_init_extra_num","_initProto2","num","sum","args","logSum","#sum","ex","setInterval","setTimeout","_MyComp","MyComp","_init_message","_init_extra_message","_init_name","_init_extra_name","c","_initClass","message","name","template","document","body","ElementWithEffects","HTMLElement","connectedCallback","disconnectedCallback","MyElement","_call_logCount2","_call_interval","_init_count2","_init_extra_count2","_initProto3","root","textContent","tagName","toLowerCase","int","clearInterval","interval","attachShadow","mode","customElements","define","el","createElement","append","remove"],"sources":["../src/example.ts"],"sourcesContent":["import {signal, effect, memo, stopEffects, component, startEffects} from './index.js'\nimport {render} from 'solid-js/web'\nimport html from 'solid-js/html'\nimport {onCleanup} from 'solid-js'\n\n//////////////////////////////////////////////////\n// Make plain classes reactive with Solid signals.\n\nclass Counter {\n\t@signal count = 0\n\n\t// @ts-expect-error not unused\n\t@effect #logCount() {\n\t\t// Log the count whenever it changes.\n\t\tconsole.log(`Count is: ${this.count}`)\n\t}\n\n\tincrement() {\n\t\tthis.count++\n\t}\n}\n\nclass Example extends Counter {\n\t@signal num = 10\n\n\t@memo get #sum() {\n\t\treturn this.count + this.num\n\t}\n\n\t// @ts-expect-error not unused\n\t@effect #logSum() {\n\t\t// Log the sum whenever it changes.\n\t\tconsole.log(`Sum is: ${this.#sum}`)\n\t}\n}\n\nconst ex = new Example() // starts effects, logs \"Count is: 0\", \"Sum is: 10\"\n\nex.count = 5 // Logs \"Count is: 5\", \"Sum is: 15\"\nex.num = 20 // Logs \"Sum is: 25\"\n\nsetInterval(() => ex.increment(), 1000)\n\n// ...later, clean up when done...\nsetTimeout(() => stopEffects(ex), 3000)\n\n//////////////////////////////////////////////////\n// Optionally use classes as Solid components.\n\n@component\nclass MyComp {\n\t@signal message = 'Hello, World!'\n\t@signal name = 'Tom'\n\n\ttemplate() {\n\t\tsetTimeout(() => (this.message = 'Hello after 3 seconds!'), 3000)\n\n\t\treturn html`\n\t\t\t<div>\n\t\t\t\t<h1>${() => this.message}</h1>\n\n\t\t\t\t<p>My name is ${() => this.name}.</p>\n\n\t\t\t\t<p>The count is: ${() => ex.count}</p>\n\t\t\t</div>\n\t\t`\n\t}\n}\n\nrender(\n\t// prettier-ignore\n\t() => html`\n\t\t<${MyComp} name=\"Joe\"></>\n\n\t\t<p>(Also see console output.)</p><br />\n\t`,\n\tdocument.body,\n)\n\n//////////////////////////////////////////////////\n// Use reactivity with Custom Elements.\n// For an additional set of utilities for concisely defining Custom Elements,\n// see the @lume/element package built on top of classy-solid.\n\nclass ElementWithEffects extends HTMLElement {\n\tconnectedCallback() {\n\t\tstartEffects(this)\n\t}\n\n\tdisconnectedCallback() {\n\t\tstopEffects(this)\n\t}\n}\n\nclass MyElement extends ElementWithEffects {\n\t#root = this.attachShadow({mode: 'open'})\n\n\t@signal count = 0\n\n\t// @ts-expect-error not unused\n\t@effect #logCount() {\n\t\t// Show the count whenever it changes.\n\t\tthis.#root.textContent = `<${this.tagName.toLowerCase()}> Count is: ${this.count}`\n\t}\n\n\t// @ts-expect-error not unused\n\t@effect #interval() {\n\t\tconst int = setInterval(() => this.count++, 1000)\n\t\tonCleanup(() => clearInterval(int))\n\t}\n}\n\ncustomElements.define('my-element', MyElement)\n\nconst el = document.createElement('my-element')\n\ndocument.body.append(el)\n\n// ...Later, remove the element to stop its effects...\nsetTimeout(() => el.remove(), 3000)\n\n// ...Later, add the element back to see effects restart...\nsetTimeout(() => document.body.append(el), 6000)\n"],"mappings":";;;;;;AAAA,SAAQA,MAAM,EAAEC,MAAM,EAAEC,IAAI,EAAEC,WAAW,EAAEC,SAAS,EAAEC,YAAY,QAAO,YAAY;AACrF,SAAQC,MAAM,QAAO,cAAc;AACnC,OAAOC,IAAI,MAAM,eAAe;AAChC,SAAQC,SAAS,QAAO,UAAU;;AAElC;AACA;;AAEA,MAAMC,OAAO,CAAC;EAAA;IAAA,CAAAC,cAAA,EAAAC,WAAA,EAAAC,iBAAA,EAAAC,UAAA,IAAAC,UAAA,aACZd,MAAM,gBAGNC,MAAM,6BAAa;MACnB;MACAc,OAAO,CAACC,GAAG,CAAC,aAAa,IAAI,CAACC,KAAK,EAAE,CAAC;IACvC,CAAC,OAAAC,CAAA,IAHO,CAACC,QAAQ,IAAAD,CAAA,EAAAE,CAAA;EAAA;EAAAC,YAAA;IAAAT,iBAAA;EAAA;EAAT,CAACO,QAAQ,GAAAT,cAAA;EAHTO,KAAK,IAAAJ,UAAA,QAAAF,WAAA,OAAG,CAAC;;EAEjB;;EAMAW,SAASA,CAAA,EAAG;IACX,IAAI,CAACL,KAAK,EAAE;EACb;AACD;AAEA,MAAMM,OAAO,SAASd,OAAO,CAAC;EAAA;IAAA,CAAAe,SAAA,EAAAC,YAAA,EAAAC,SAAA,EAAAC,eAAA,EAAAC,WAAA,IAAAd,UAAA,aAC5Bd,MAAM,cAENE,IAAI,wBAAY;MAChB,OAAO,IAAI,CAACe,KAAK,GAAG,IAAI,CAACY,GAAG;IAC7B,CAAC,IAGA5B,MAAM,2BAAW;MACjB;MACAc,OAAO,CAACC,GAAG,CAAC,WAAW,IAAI,CAAC,CAACc,GAAG,EAAE,CAAC;IACpC,CAAC,OAAAZ,CAAA,IARS,CAACY,GAAG,IAAAZ,CAAA,EAHOT,OAAO,EAAAW,CAAA;EAAA;EAAAC,YAAA,GAAAU,IAAA;IAAA,SAAAA,IAAA;IAAAJ,eAAA;EAAA;EAQpB,CAACK,MAAM,GAAAP,YAAA;EAPPI,GAAG,IAAAD,WAAA,QAAAF,SAAA,OAAG,EAAE;EAAA,IAEN,CAACI,GAAGG,CAAA;IAAA,OAAAT,SAAA;EAAA,EAId;AAKD;AAEA,MAAMU,EAAE,GAAG,IAAIX,OAAO,CAAC,CAAC,EAAC;;AAEzBW,EAAE,CAACjB,KAAK,GAAG,CAAC,EAAC;AACbiB,EAAE,CAACL,GAAG,GAAG,EAAE,EAAC;;AAEZM,WAAW,CAAC,MAAMD,EAAE,CAACZ,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC;;AAEvC;AACAc,UAAU,CAAC,MAAMjC,WAAW,CAAC+B,EAAE,CAAC,EAAE,IAAI,CAAC;;AAEvC;AACA;AAAA,IAAAG,OAAA;AAEA,MAAAC,MAAA,CACa;EAAA;IAAA;MAAAlB,CAAA,GAAAmB,aAAA,EAAAC,mBAAA,EAAAC,UAAA,EAAAC,gBAAA;MAAAC,CAAA,GAAAN,OAAA,EAAAO,UAAA;IAAA,IAAA9B,UAAA,QADZV,SAAS,KAERJ,MAAM,kBACNA,MAAM;EAAA;EAAAqB,YAAA;IAAAqB,gBAAA;EAAA;EADCG,OAAO,GAAAN,aAAA,OAAG,eAAe;EACzBO,IAAI,IAAAN,mBAAA,QAAAC,UAAA,OAAG,KAAK;EAEpBM,QAAQA,CAAA,EAAG;IACVX,UAAU,CAAC,MAAO,IAAI,CAACS,OAAO,GAAG,wBAAyB,EAAE,IAAI,CAAC;IAEjE,OAAOtC,IAAI;AACb;AACA,UAAU,MAAM,IAAI,CAACsC,OAAO;AAC5B;AACA,oBAAoB,MAAM,IAAI,CAACC,IAAI;AACnC;AACA,uBAAuB,MAAMZ,EAAE,CAACjB,KAAK;AACrC;AACA,GAAG;EACF;EAAC;IAAA2B,UAAA;EAAA;AACF;AAEAtC,MAAM;AACL;AACA,MAAMC,IAAI;AACX,KAAK+B,OAAM;AACX;AACA;AACA,EAAE,EACDU,QAAQ,CAACC,IACV,CAAC;;AAED;AACA;AACA;AACA;;AAEA,MAAMC,kBAAkB,SAASC,WAAW,CAAC;EAC5CC,iBAAiBA,CAAA,EAAG;IACnB/C,YAAY,CAAC,IAAI,CAAC;EACnB;EAEAgD,oBAAoBA,CAAA,EAAG;IACtBlD,WAAW,CAAC,IAAI,CAAC;EAClB;AACD;AAEA,MAAMmD,SAAS,SAASJ,kBAAkB,CAAC;EAAA;IAAA,CAAAK,eAAA,EAAAC,cAAA,EAAAC,YAAA,EAAAC,kBAAA,EAAAC,WAAA,IAAA7C,UAAA,aAGzCd,MAAM,gBAGNC,MAAM,6BAAa;MACnB;MACA,IAAI,CAAC,CAAC2D,IAAI,CAACC,WAAW,GAAG,IAAI,IAAI,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,eAAe,IAAI,CAAC9C,KAAK,EAAE;IACnF,CAAC,IAGAhB,MAAM,6BAAa;MACnB,MAAM+D,GAAG,GAAG7B,WAAW,CAAC,MAAM,IAAI,CAAClB,KAAK,EAAE,EAAE,IAAI,CAAC;MACjDT,SAAS,CAAC,MAAMyD,aAAa,CAACD,GAAG,CAAC,CAAC;IACpC,CAAC,OAAA9C,CAAA,IAdD,CAAC0C,IAAI,IAAA1C,CAAA,EADkBgC,kBAAkB,EAAA9B,CAAA;EAAA;EAAAC,YAAA,GAAAU,IAAA;IAAA,SAAAA,IAAA;IAAA2B,kBAAA;EAAA;EAYjC,CAACQ,QAAQ,GAAAV,cAAA;EANT,CAACrC,QAAQ,GAAAoC,eAAA;EALjB,CAACK,IAAI,IAAAD,WAAA,QAAG,IAAI,CAACQ,YAAY,CAAC;IAACC,IAAI,EAAE;EAAM,CAAC,CAAC;EAEjCnD,KAAK,GAAAwC,YAAA,OAAG,CAAC;;EAEjB;;EAMA;AAKD;AAEAY,cAAc,CAACC,MAAM,CAAC,YAAY,EAAEhB,SAAS,CAAC;AAE9C,MAAMiB,EAAE,GAAGvB,QAAQ,CAACwB,aAAa,CAAC,YAAY,CAAC;AAE/CxB,QAAQ,CAACC,IAAI,CAACwB,MAAM,CAACF,EAAE,CAAC;;AAExB;AACAnC,UAAU,CAAC,MAAMmC,EAAE,CAACG,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC;;AAEnC;AACAtC,UAAU,CAAC,MAAMY,QAAQ,CAACC,IAAI,CAACwB,MAAM,CAACF,EAAE,CAAC,EAAE,IAAI,CAAC","ignoreList":[]}