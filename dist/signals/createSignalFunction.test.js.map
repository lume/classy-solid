{"version":3,"file":"createSignalFunction.test.js","names":["createSignalFunction","describe","it","num","expect","toBe","setResult","n","f1","func","f2","n1","num3","n3","undefined","num4","bool","b1","b","bool2","n4","fn","n5","func2","fn2","n6","stringOrFunc1","sf1","sf2","sf3","sf6","sf7","sf8","stringOrFunc2","sf9","sf10","sf11","sf12","sf13","sf14","sf15"],"sources":["../../src/signals/createSignalFunction.test.ts"],"sourcesContent":["import {createSignalFunction} from './createSignalFunction.js'\n\ndescribe('classy-solid', () => {\n\tdescribe('createSignalFunction()', () => {\n\t\tit('has gettable and settable values via a single overloaded function', () => {\n\t\t\tconst num = createSignalFunction(0)\n\n\t\t\t// Set the variable's value by passing a value in.\n\t\t\tnum(1)\n\t\t\t// Read the variable's value by calling it with no args.\n\t\t\texpect(num()).toBe(1)\n\n\t\t\t// increment example:\n\t\t\tconst setResult = num(num() + 1)\n\t\t\texpect(num()).toBe(2)\n\t\t\texpect(setResult).toBe(2)\n\n\t\t\t// Set with a function that accepts the previous value and returns the next value.\n\t\t\tnum(n => n + 1)\n\t\t\texpect(num()).toBe(3)\n\t\t})\n\n\t\tit('works with function values', () => {\n\t\t\tconst f1 = () => 123\n\t\t\tconst func = createSignalFunction(f1)\n\n\t\t\texpect(func()).toBe(f1)\n\n\t\t\tconst f2 = () => 456\n\t\t\tfunc(() => f2)\n\n\t\t\texpect(func()).toBe(f2)\n\t\t})\n\t})\n})\n\n//////////////////////////////////////////////////////////////////////////\n// createSignalFunction type tests ///////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////\n\n{\n\tconst num = createSignalFunction(1)\n\tlet n1: number = num()\n\tn1\n\tnum(123)\n\tnum(n => (n1 = n + 1))\n\tnum()\n\n\tconst num3 = createSignalFunction<number>()\n\t// @ts-expect-error   Type 'undefined' is not assignable to type 'number'. ts(2322)\n\tlet n3: number = num3()\n\tnum3(123)\n\tnum3(undefined) // ok, accepts undefined\n\t// @ts-expect-error Object is possibly 'undefined'. ts(2532) (the `n` value)\n\tnum3(n => (n3 = n + 1))\n\tnum3() // ok, getter\n\n\t// @ts-expect-error Argument of type 'boolean' is not assignable to parameter of type 'number'. ts(2345)\n\tconst num4 = createSignalFunction<number>(true)\n\n\tconst bool = createSignalFunction(true)\n\tlet b1: boolean = bool()\n\tb1\n\tbool(false)\n\tbool(b => (b1 = !b))\n\tbool()\n\n\tconst bool2 = createSignalFunction<boolean>()\n\t// @ts-expect-error   Type 'undefined' is not assignable to type 'number'. ts(2322)\n\tlet n4: boolean = bool2()\n\tbool2(false)\n\tbool2(undefined) // ok, accepts undefined\n\tbool2(n => (n4 = !n)) // ok because undefined is being converted to boolean\n\t// @ts-expect-error Type 'boolean | undefined' is not assignable to type 'boolean'. ts(2322)\n\tbool2(n => (n4 = n))\n\tbool2() // ok, accepts undefined\n\n\tconst func = createSignalFunction(() => 1)\n\t// @ts-expect-error 1 is not assignable to function (no overload matches)\n\tfunc(() => 1)\n\tfunc(() => (): 1 => 1) // ok, set the value to a function\n\tconst fn: () => 1 = func() // ok, returns function value\n\tfn\n\tconst n5: 1 = func()()\n\tn5\n\n\tconst func2 = createSignalFunction<() => number>(() => 1)\n\t// @ts-expect-error number is not assignable to function (no overload matches)\n\tfunc2(() => 1)\n\tfunc2(() => () => 1) // ok, set the value to a function\n\tconst fn2: () => number = func2() // ok, returns function value\n\tfn2\n\tconst n6: number = func2()()\n\tn6\n\n\tconst stringOrFunc1 = createSignalFunction<(() => number) | string>('')\n\t// @ts-expect-error number not assignable to string | (()=>number) | undefined\n\tstringOrFunc1(() => 1)\n\tconst sf1: () => number = stringOrFunc1(() => () => 1)\n\tsf1\n\tconst sf2: string = stringOrFunc1('oh yeah')\n\tsf2\n\tconst sf3: string = stringOrFunc1(() => 'oh yeah')\n\tsf3\n\tstringOrFunc1() // ok, getter\n\t// @ts-expect-error cannot set signal to undefined\n\tstringOrFunc1(undefined)\n\t// @ts-expect-error return value might be string\n\tconst sf6: () => number = stringOrFunc1()\n\tsf6\n\tconst sf7: (() => number) | string | undefined = stringOrFunc1()\n\tsf7\n\tconst sf8: (() => number) | string = stringOrFunc1()\n\tsf8\n\n\tconst stringOrFunc2 = createSignalFunction<(() => number) | string>()\n\t// @ts-expect-error number not assignable to string | (()=>number) | undefined\n\tstringOrFunc2(() => 1)\n\tconst sf9: () => number = stringOrFunc2(() => () => 1)\n\tsf9\n\tconst sf10: string = stringOrFunc2('oh yeah')\n\tsf10\n\tconst sf11: string = stringOrFunc2(() => 'oh yeah')\n\tsf11\n\t// @ts-expect-error 'string | (() => number) | undefined' is not assignable to type 'undefined'.\n\tconst sf12: undefined = stringOrFunc2()\n\tsf12\n\tconst sf13: undefined = stringOrFunc2(undefined)\n\tsf13\n\tconst sf14: (() => number) | string | undefined = stringOrFunc2()\n\tsf14\n\t// @ts-expect-error return value might be undefined\n\tconst sf15: (() => number) | string = stringOrFunc2()\n\tsf15\n}\n"],"mappings":"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","ignoreList":[]}