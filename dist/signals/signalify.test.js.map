{"version":3,"file":"signalify.test.js","names":["createMutable","signalify","testButterflyProps","createEffect","untrack","memoify","describe","it","obj","n","obj2","expect","toBe","sum","result","Object","getOwnPropertyDescriptor","value","get","foo","_v","before","after","butterfly","colors","_wingSize","wingSize","s","b","test","signalifyInitially","Butterfly","constructor","b2","prototype","Foo","amount","Bar","double","count","a","name","assign","create","countA","countB"],"sources":["../../src/signals/signalify.test.ts"],"sourcesContent":["import {createMutable} from 'solid-js/store'\nimport {signalify} from './signalify.js'\nimport {testButterflyProps} from '../index.test.js'\nimport {createEffect, untrack} from 'solid-js'\nimport {memoify} from './memoify.js'\n\ndescribe('classy-solid', () => {\n\tdescribe('signalify()', () => {\n\t\tit('returns the same object that was passed in', () => {\n\t\t\tlet obj = {n: 123}\n\t\t\tlet obj2 = signalify(obj, 'n')\n\t\t\texpect(obj).toBe(obj2)\n\n\t\t\tobj = createMutable({n: 123}) // Returns a Proxy wrapping the original object\n\t\t\tobj2 = signalify(obj, 'n') // Should return early with the same Proxy\n\t\t\texpect(obj).toBe(obj2)\n\t\t})\n\n\t\tit('skips function properties in automatic mode', () => {\n\t\t\tconst obj = {\n\t\t\t\tsum() {\n\t\t\t\t\treturn 1\n\t\t\t\t},\n\t\t\t}\n\t\t\tconst result = signalify(obj)\n\t\t\texpect(result.sum()).toBe(1)\n\t\t\texpect(typeof Object.getOwnPropertyDescriptor(result, 'sum')?.value).toBe('function')\n\t\t})\n\n\t\tit('does not skip function properties in explicit mode', () => {\n\t\t\tconst obj = {\n\t\t\t\tsum() {\n\t\t\t\t\treturn 1\n\t\t\t\t},\n\t\t\t}\n\t\t\tconst result = signalify(obj, 'sum')\n\t\t\texpect(result.sum()).toBe(1)\n\t\t\texpect(typeof Object.getOwnPropertyDescriptor(result, 'sum')?.value === 'undefined').toBe(true)\n\t\t\texpect(typeof Object.getOwnPropertyDescriptor(result, 'sum')?.get).toBe('function')\n\t\t})\n\n\t\tit('skips properties already memoified or signalified', () => {\n\t\t\tconst obj = {\n\t\t\t\tget foo() {\n\t\t\t\t\treturn 1\n\t\t\t\t},\n\t\t\t\tset foo(_v) {},\n\t\t\t}\n\t\t\tmemoify(obj, 'foo')\n\t\t\tconst before = Object.getOwnPropertyDescriptor(obj, 'foo')?.get\n\t\t\tsignalify(obj, 'foo')\n\t\t\tconst after = Object.getOwnPropertyDescriptor(obj, 'foo')?.get\n\t\t\texpect(before).toBe(after)\n\t\t})\n\n\t\tdescribe('making objects reactive with signalify()', () => {\n\t\t\tit('', () => {\n\t\t\t\tconst butterfly = {\n\t\t\t\t\tcolors: 3,\n\n\t\t\t\t\t_wingSize: 2,\n\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this._wingSize\n\t\t\t\t\t},\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis._wingSize = s\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tconst b = signalify(butterfly, 'colors', 'wingSize')\n\n\t\t\t\ttestButterflyProps(b)\n\n\t\t\t\t// quick type check:\n\t\t\t\t// @ts-expect-error \"foo\" is not a property on butterfly\n\t\t\t\tsignalify(butterfly, 'colors', 'wingSize', 'foo')\n\t\t\t})\n\n\t\t\tit('is not tracked inside of an effect to prevent loops', () => {\n\t\t\t\ttest(true)\n\t\t\t\ttest(false)\n\n\t\t\t\tfunction test(signalifyInitially: boolean) {\n\t\t\t\t\t// Library author provides obj\n\t\t\t\t\tconst obj = {n: 123}\n\t\t\t\t\tif (signalifyInitially) signalify(obj, 'n') // library author might signalify obj.n\n\n\t\t\t\t\t// User code:\n\t\t\t\t\tcreateEffect(() => {\n\t\t\t\t\t\t// o.n may or may not already be signalified, user does not know, but they want to be sure they can react to its changes.\n\t\t\t\t\t\tsignalify(obj, 'n')\n\n\t\t\t\t\t\tobj.n = 123 // does not make an infinite loop\n\n\t\t\t\t\t\t// A deeper effect will be reading the property.\n\t\t\t\t\t\tcreateEffect(() => {\n\t\t\t\t\t\t\tobj.n\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\t// No expectations in this test, the test passes if a maximum\n\t\t\t\t\t// callstack size error (infinite loop) does not happen.\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\tdescribe('making reactive classes with signalify instead of with decorators', () => {\n\t\t\tit('makes class fields reactive, not using any decorators', () => {\n\t\t\t\tclass Butterfly {\n\t\t\t\t\tcolors = 3\n\n\t\t\t\t\t#wingSize = 2\n\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this.#wingSize\n\t\t\t\t\t}\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis.#wingSize = s\n\t\t\t\t\t}\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsignalify(this, 'colors', 'wingSize')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst b = new Butterfly()\n\n\t\t\t\ttestButterflyProps(b)\n\n\t\t\t\t// quick type check:\n\t\t\t\tconst b2 = new Butterfly()\n\t\t\t\t// @ts-expect-error \"foo\" is not a property on Butterfly\n\t\t\t\tsignalify(b2, 'colors', 'wingSize', 'foo')\n\t\t\t})\n\n\t\t\tit('makes constructor properties reactive, not using any decorators', () => {\n\t\t\t\tclass Butterfly {\n\t\t\t\t\tdeclare colors: number\n\n\t\t\t\t\t#wingSize: number\n\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this.#wingSize\n\t\t\t\t\t}\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis.#wingSize = s\n\t\t\t\t\t}\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tthis.colors = 3\n\t\t\t\t\t\tthis.#wingSize = 2\n\n\t\t\t\t\t\tsignalify(this, 'colors', 'wingSize')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst b = new Butterfly()\n\n\t\t\t\ttestButterflyProps(b)\n\t\t\t})\n\n\t\t\tit('works with a function-style class, with signalify in the constructor', () => {\n\t\t\t\tfunction Butterfly() {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis.colors = 3\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis._wingSize = 2\n\n\t\t\t\t\t// @ts-ignore no type checking for ES5-style classes.\n\t\t\t\t\tsignalify(this, 'colors', 'wingSize')\n\t\t\t\t}\n\n\t\t\t\tButterfly.prototype = {\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this._wingSize\n\t\t\t\t\t},\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis._wingSize = s\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst b = new Butterfly()\n\t\t\t\ttestButterflyProps(b)\n\t\t\t})\n\n\t\t\tit('works with a function-style class, with properties on the prototype, and signalify in constructor', () => {\n\t\t\t\tfunction Butterfly() {\n\t\t\t\t\t// @ts-ignore no type checking for ES5-style classes.\n\t\t\t\t\tsignalify(this, 'colors', 'wingSize')\n\t\t\t\t}\n\n\t\t\t\tButterfly.prototype = {\n\t\t\t\t\tcolors: 3,\n\t\t\t\t\t_wingSize: 2,\n\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this._wingSize\n\t\t\t\t\t},\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis._wingSize = s\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\t// @ts-ignore no type checking for ES5-style classes.\n\t\t\t\tconst b = new Butterfly()\n\t\t\t\ttestButterflyProps(b)\n\t\t\t})\n\n\t\t\tit('can be used on a function-style class, with properties on the prototype, and signalify on the prototype', () => {\n\t\t\t\tfunction Butterfly() {}\n\n\t\t\t\tButterfly.prototype = {\n\t\t\t\t\tcolors: 3,\n\t\t\t\t\t_wingSize: 2,\n\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this._wingSize\n\t\t\t\t\t},\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis._wingSize = s\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tsignalify(Butterfly.prototype, 'colors', 'wingSize')\n\n\t\t\t\t// @ts-ignore no type checking for ES5-style classes.\n\t\t\t\tconst b = new Butterfly()\n\t\t\t\ttestButterflyProps(b)\n\t\t\t})\n\n\t\t\tit('can be used on a function-style class, with properties in the constructor, and signalify on the prototype', () => {\n\t\t\t\tfunction Butterfly() {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis.colors = 3\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis._wingSize = 2\n\t\t\t\t}\n\n\t\t\t\tButterfly.prototype = {\n\t\t\t\t\tget wingSize() {\n\t\t\t\t\t\treturn this._wingSize\n\t\t\t\t\t},\n\t\t\t\t\tset wingSize(s: number) {\n\t\t\t\t\t\tthis._wingSize = s\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tsignalify(Butterfly.prototype, 'colors', 'wingSize')\n\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst b = new Butterfly()\n\t\t\t\ttestButterflyProps(b)\n\t\t\t})\n\n\t\t\tit('show that signalify causes constructor to be reactive when used manually instead of decorators', () => {\n\t\t\t\tclass Foo {\n\t\t\t\t\tamount = 3\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsignalify(this, 'amount')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tclass Bar extends Foo {\n\t\t\t\t\tdouble = 0\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper()\n\t\t\t\t\t\tsignalify(this, 'double')\n\t\t\t\t\t\tthis.double = this.amount * 2 // this tracks access of .amount\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0\n\t\t\t\tlet b!: Bar\n\n\t\t\t\tcreateEffect(() => {\n\t\t\t\t\tb = new Bar() // tracks .amount\n\t\t\t\t\tcount++\n\t\t\t\t})\n\n\t\t\t\texpect(count).toBe(1)\n\n\t\t\t\tb.amount = 4 // triggers\n\n\t\t\t\texpect(count).toBe(2)\n\t\t\t})\n\n\t\t\tit('show how to manually untrack constructors when not using decorators', () => {\n\t\t\t\tclass Foo {\n\t\t\t\t\tamount = 3\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsignalify(this, 'amount')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tclass Bar extends Foo {\n\t\t\t\t\tdouble = 0\n\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper()\n\t\t\t\t\t\tsignalify(this, 'double')\n\n\t\t\t\t\t\tuntrack(() => {\n\t\t\t\t\t\t\tthis.double = this.amount * 2\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0\n\t\t\t\tlet b!: Bar\n\n\t\t\t\tcreateEffect(() => {\n\t\t\t\t\tb = new Bar() // does not track .amount\n\t\t\t\t\tcount++\n\t\t\t\t})\n\n\t\t\t\texpect(count).toBe(1)\n\n\t\t\t\tb.amount = 4 // will not trigger\n\n\t\t\t\texpect(count).toBe(1)\n\t\t\t})\n\t\t})\n\n\t\tit('creates signal storage per descriptor+object pair, not per descriptor', () => {\n\t\t\t// This ensures we don't accidentally share a signal with multiple\n\t\t\t// objects. For example, we don't want a single signal per descriptor\n\t\t\t// because if the descriptor is on a prototype object, then that single\n\t\t\t// signal will erroneously be used by all objects extending from that\n\t\t\t// prototype.\n\n\t\t\tconst a = signalify({foo: 0, name: 'a'}, 'foo')\n\t\t\tconst b = Object.assign(Object.create(a) as typeof a, {name: 'b'})\n\n\t\t\texpect(a.foo).toBe(0)\n\t\t\texpect(b.foo).toBe(0)\n\n\t\t\tlet countA = 0\n\n\t\t\tcreateEffect(() => {\n\t\t\t\ta.foo\n\t\t\t\tcountA++\n\t\t\t})\n\n\t\t\tlet countB = 0\n\n\t\t\tcreateEffect(() => {\n\t\t\t\tb.foo\n\t\t\t\tcountB++\n\t\t\t})\n\n\t\t\texpect(countA).toBe(1)\n\t\t\texpect(countB).toBe(1)\n\n\t\t\ta.foo++\n\n\t\t\texpect(a.foo).toBe(1)\n\t\t\texpect(countA).toBe(2)\n\n\t\t\t// ensure that updating a's foo property did not update b's foo\n\t\t\t// property or trigger b's effect, despite that the property is\n\t\t\t// defined in a single location on the prototype.\n\t\t\t// @ts-ignore\n\t\t\texpect(b.foo).toBe(0)\n\t\t\texpect(countB).toBe(1)\n\t\t})\n\t})\n})\n"],"mappings":"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","ignoreList":[]}