{"version":3,"file":"syncSignals.js","names":["createComputed","syncSignals","getterA","setterA","getterB","setterB","settingB","settingA","a","b"],"sources":["../../src/signals/syncSignals.ts"],"sourcesContent":["import {createComputed} from 'solid-js'\n\n/**\n * Syncs two signals together so that setting one signal's value updates the\n * other, and vice versa, without an infinite loop.\n *\n * Example:\n *\n * ```js\n * const [foo, setFoo] = createSignal(0)\n * const [bar, setBar] = createSignal(0)\n *\n * syncSignals(foo, setFoo, bar, setBar)\n *\n * createEffect(() => console.log(foo(), bar()))\n *\n * setFoo(1) // logs \"1 1\"\n * setBar(2) // logs \"2 2\"\n * ```\n *\n * It returns the getters/setters, so it is possible to also create the signals\n * and sync them at once:\n *\n * ```js\n * const [[foo, setFoo], [bar, setBar]] = syncSignals(...createSignal(0), ...createSignal(0))\n *\n * createEffect(() => console.log(foo(), bar()))\n *\n * setFoo(1) // logs \"1 1\"\n * setBar(2) // logs \"2 2\"\n * ```\n */\nexport function syncSignals<T>(\n\tgetterA: () => T,\n\tsetterA: (value: T) => void,\n\tgetterB: () => T,\n\tsetterB: (value: T) => void,\n) {\n\tlet settingB = false\n\tlet settingA = false\n\n\tcreateComputed(\n\t\t// @ts-ignore not all code paths return\n\t\t() => {\n\t\t\tconst a = getterA()\n\t\t\tif (settingA) return (settingA = false)\n\t\t\tsettingB = true\n\t\t\tsetterB(a)\n\t\t},\n\t)\n\n\tcreateComputed(\n\t\t// @ts-ignore not all code paths return\n\t\t() => {\n\t\t\tconst b = getterB()\n\t\t\tif (settingB) return (settingB = false)\n\t\t\tsettingA = true\n\t\t\tsetterA(b)\n\t\t},\n\t)\n\n\treturn [[getterA, setterA] as const, [getterB, setterB] as const] as const\n}\n"],"mappings":"AAAA,SAAQA,cAAc,QAAO,UAAU;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAC1BC,OAAgB,EAChBC,OAA2B,EAC3BC,OAAgB,EAChBC,OAA2B,EAC1B;EACD,IAAIC,QAAQ,GAAG,KAAK;EACpB,IAAIC,QAAQ,GAAG,KAAK;EAEpBP,cAAc;EACb;EACA,MAAM;IACL,MAAMQ,CAAC,GAAGN,OAAO,CAAC,CAAC;IACnB,IAAIK,QAAQ,EAAE,OAAQA,QAAQ,GAAG,KAAK;IACtCD,QAAQ,GAAG,IAAI;IACfD,OAAO,CAACG,CAAC,CAAC;EACX,CACD,CAAC;EAEDR,cAAc;EACb;EACA,MAAM;IACL,MAAMS,CAAC,GAAGL,OAAO,CAAC,CAAC;IACnB,IAAIE,QAAQ,EAAE,OAAQA,QAAQ,GAAG,KAAK;IACtCC,QAAQ,GAAG,IAAI;IACfJ,OAAO,CAACM,CAAC,CAAC;EACX,CACD,CAAC;EAED,OAAO,CAAC,CAACP,OAAO,EAAEC,OAAO,CAAC,EAAW,CAACC,OAAO,EAAEC,OAAO,CAAC,CAAU;AAClE","ignoreList":[]}